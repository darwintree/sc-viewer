import{r as a,o as c,c as _,w as s,a as l,b as g,t as $,d as D,e as y,f as p,F as b,p as E,g as G,h as q,i as k,P as K,I as Q,j as T,k as P,l as X,m as Y,n as Z,q as tt,s as et,N as nt,u as st,v as rt,x as at,y as ot,z as lt,A as it,B as ct,C as ut,D as dt,E as _t,G as pt,H as mt,J as ht,K as ft,L as yt,M as vt,O as gt,Q as $t,R as bt,S as wt,T as kt,U as Lt}from"./vendor.27892265.js";const St=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&h(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerpolicy&&(e.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?e.credentials="include":r.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function h(r){if(r.ep)return;r.ep=!0;const e=o(r);fetch(r.href,e)}};St();var v=(t,n)=>{for(const[o,h]of n)t[o]=h;return t};const xt={name:"BreadCrumbNav",data(){return{}},methods:{to(t){this.$router.push(t)}}},Dt=g("\u76F8\u7C3F\u9996\u9875");function Ct(t,n,o,h,r,e){const i=a("n-breadcrumb-item"),u=a("n-breadcrumb");return c(),_(u,{separator:"/"},{default:s(()=>[l(i,{onClick:n[0]||(n[0]=d=>e.to("/album"))},{default:s(()=>[Dt]),_:1}),t.$route.params.idol?(c(),_(i,{key:0,onClick:n[1]||(n[1]=d=>e.to(`/album/${t.$route.params.idol}`))},{default:s(()=>[g($(t.$route.params.idol),1)]),_:1})):D("",!0),t.$route.params.story?(c(),_(i,{key:1,onClick:n[2]||(n[2]=d=>e.to(`/album/${t.$route.params.idol}`))},{default:s(()=>[g($(t.$route.params.story),1)]),_:1})):D("",!0),t.$route.params.chapter?(c(),_(i,{key:2},{default:s(()=>[g($(t.$route.params.chapter),1)]),_:1})):D("",!0)]),_:1})}var Nt=v(xt,[["render",Ct]]);const It={components:{BreadCrumbNav:Nt},data(){return{target:()=>this.$refs.scrollContainer}}};function Mt(t,n,o,h,r,e){const i=a("bread-crumb-nav"),u=a("n-layout-header"),d=a("router-view"),m=a("n-layout-content"),w=a("n-layout");return c(),_(w,{class:"bg"},{default:s(()=>[l(u,{class:"header",ref:"header"},{default:s(()=>[l(i)]),_:1},512),l(m,null,{default:s(()=>[l(d)]),_:1})]),_:1})}var jt=v(It,[["render",Mt],["__scopeId","data-v-de304ba2"]]);const Bt={name:"HelloWorld",data(){return{state:{count:0}}}},H=t=>(E("data-v-a2bbb864"),t=t(),G(),t),Ut=H(()=>p("p",null,[p("a",{href:"https://vitejs.dev/guide/features.html",target:"_blank"}," Vite Documentation "),g(" | "),p("a",{href:"https://v3.vuejs.org/",target:"_blank"},"Vue 3 Documentation")],-1)),Ot=H(()=>p("p",null,[g(" Edit "),p("code",null,"components/HelloWorld.vue"),g(" to test hot module replacement. ")],-1));function Tt(t,n,o,h,r,e){return c(),y(b,null,[Ut,p("button",{type:"button",onClick:n[0]||(n[0]=i=>r.state.count++)}," count is: "+$(r.state.count),1),Ot],64)}var Pt=v(Bt,[["render",Tt],["__scopeId","data-v-a2bbb864"]]);const U={illuminationstars:["\u706F\u7E54","\u771F\u4E43","\u3081\u3050\u308B"],lantica:["\u6469\u7F8E\u3005","\u9727\u5B50","\u604B\u9418","\u7D50\u83EF","\u54B2\u8036"],hokagoclimaxgirls:["\u51DB\u4E16","\u667A\u4EE3\u5B50","\u679C\u7A42","\u6A39\u91CC","\u590F\u8449"],alstroemeria:["\u7518\u5948","\u5343\u96EA","\u751C\u82B1"],straylight:["\u51AC\u512A\u5B50","\u3042\u3055\u3072","\u611B\u4F9D"],noctchill:["\u96DB\u83DC","\u900F","\u5186\u9999","\u5C0F\u7CF8"],shhis:["\u306B\u3061\u304B","\u7F8E\u7434"],"283_production":["283\u6D3B\u52A8\u5267\u60C5","\u4E3B\u9875\u5267\u60C5"]},Ht={};var R={units:U,others:Ht};let O=[],L="/sc-viewer";for(let t of Object.keys(U))O=O.concat(U[t]);function I(t,n){for(let o of O)if(t.indexOf(o)>=0)return`${L}/assets/idol/thumb/${o}.webp`;return n?`${L}/assets/idol/thumb/${n}.webp`:`${L}/assets/idol/thumb/dummy.webp`}function Rt(t){return t==="283_production"?`${L}/assets/unit/rotating.gif`:`${L}/assets/unit/${t}.png`}function A(t){return`${L}/assets/idol/icon/${t}.png`}function At(t){return`${L}/assets/campaign/${t}.webp`}const F={configBase:"https://raw.githubusercontent.com/darwintree/sc-viewer-config/main",translationBase:"https://raw.githubusercontent.com/ShinyGroup/SCTranslationData/master/data/story"},Ft=["\u6AFB\u6728 \u771F\u4E43","\u98A8\u91CE \u706F\u7E54","\u516B\u5BAE \u3081\u3050\u308B","\u6708\u5CA1 \u604B\u9418","\u7530\u4E2D \u6469\u7F8E\u3005","\u767D\u702C \u54B2\u8036","\u4E09\u5CF0 \u7D50\u83EF","\u5E7D\u8C37 \u9727\u5B50","\u5C0F\u5BAE \u679C\u7A42","\u5712\u7530 \u667A\u4EE3\u5B50","\u897F\u57CE \u6A39\u91CC","\u675C\u91CE \u51DB\u4E16","\u6709\u6816\u5DDD \u590F\u8449","\u5927\u5D0E \u7518\u5948","\u5927\u5D0E \u751C\u82B1","\u6851\u5C71 \u5343\u96EA","\u82B9\u6CA2 \u3042\u3055\u3072","\u9EDB \u51AC\u512A\u5B50","\u548C\u6CC9 \u611B\u4F9D","\u6D45\u5009 \u900F","\u6A0B\u53E3 \u5186\u9999","\u798F\u4E38 \u5C0F\u7CF8","\u5E02\u5DDD \u96DB\u83DC","\u4E03\u8349 \u306B\u3061\u304B","\u7DCB\u7530 \u7F8E\u7434"];function M(t){for(let n of Ft)if(n.indexOf(t)>=0)return n.split(" ").join("");return t}async function C(t){let n=await q.get(t);return console.log(n.data),n.data}const Jt={name:"UnitRow",props:["unitName"],computed:{unitMembers(){var t;return(t=this.$store.state.units[this.unitName])!=null?t:[]},othersLine(){return this.unitName==="283_production"}},methods:{getUnitSrc(t){return Rt(t)},getIdolSrc(t){return I(t)},to(t){return`/album/${M(t)}`}}},Vt=["src"],Wt=["src"],zt={style:{width:"100%","text-align":"center"}},Et={class:"black-a"};function Gt(t,n,o,h,r,e){const i=a("n-gi"),u=a("router-link"),d=a("n-grid");return c(),y(b,null,[l(d,{"x-gap":"12","item-responsive":"",responsive:"screen"},{default:s(()=>[l(i,{span:"0 m:6",class:"center-grid"},{default:s(()=>[p("img",{src:e.getUnitSrc(o.unitName),style:{width:"100%"}},null,8,Vt)]),_:1}),(c(!0),y(b,null,k(e.unitMembers,m=>(c(),_(i,{key:m,span:"4 m:3 xl:2",responsive:"screen"},{default:s(()=>[l(u,{to:e.to(m),tag:"img",alt:m,title:m},{default:s(()=>[p("img",{src:e.getIdolSrc(m),style:{width:"100%",cursor:"pointer"}},null,8,Wt)]),_:2},1032,["to","alt","title"])]),_:2},1024))),128))]),_:1}),l(d,{"x-gap":"12","item-responsive":"",responsive:"screen"},{default:s(()=>[l(i,{span:"0 m:6"}),(c(!0),y(b,null,k(e.unitMembers,m=>(c(),_(i,{key:m,span:"4 m:3 xl:2"},{default:s(()=>[l(u,{to:e.to(m),style:{"text-decoration":"none"}},{default:s(()=>[p("div",zt,[p("a",Et,$(m),1)])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})],64)}var qt=v(Jt,[["render",Gt],["__scopeId","data-v-9b04cfd8"]]);const Kt={name:"Album",components:{UnitRow:qt},computed:{unitList(){return Object.keys(this.$store.state.units)},others(){return Object.keys(this.$store.state.others)}}};function Qt(t,n,o,h,r,e){const i=a("unit-row");return c(),y("div",null,[(c(!0),y(b,null,k(e.unitList,(u,d)=>(c(),_(i,{key:d,unitName:u},null,8,["unitName"]))),128)),(c(!0),y(b,null,k(e.others,(u,d)=>(c(),_(i,{key:d,unitName:u},null,8,["unitName"]))),128))])}var Xt=v(Kt,[["render",Qt]]);const Yt={name:"Profile",props:["idolName"],computed:{idolSrc(){return I(this.idolName)}}},Zt=["src"];function te(t,n,o,h,r,e){const i=a("n-card");return c(),_(i,null,{cover:s(()=>[p("img",{src:e.idolSrc},null,8,Zt)]),_:1})}var J=v(Yt,[["render",te]]);const ee={props:["showModal","selectedStoryObj","translatedDetails"],emits:["update:showModal"],name:"ChapterListModal",components:{PlayCircle20Regular:K,Icon:Q},watch:{showModal(t){this.$emit("update:showModal",t)}},computed:{showIcon(){return Boolean(this.selectedStoryObj.id)}},methods:{getIconSrc(t){return A(t)},stripCsvSuffix(t){return t.substring(0,t.length-4)}}},ne={class:"n-thing-header"};function se(t,n,o,h,r,e){const i=a("n-avatar"),u=a("PlayCircle20Regular"),d=a("Icon"),m=a("router-link"),w=a("n-list-item"),x=a("n-list"),f=a("n-thing"),S=a("n-card"),B=a("n-modal");return c(),_(B,{show:o.showModal,"onUpdate:show":n[1]||(n[1]=N=>o.showModal=N)},{default:s(()=>[l(S,null,{default:s(()=>[l(f,null,T({header:s(()=>[p("div",ne,$(o.selectedStoryObj.name),1)]),description:s(()=>[(c(!0),y(b,null,k(o.translatedDetails[o.selectedStoryObj.name],(N,z)=>(c(),_(x,{key:z},{default:s(()=>[l(w,{class:"center"},{default:s(()=>[l(m,{to:`/album/${t.$route.params.idol}/${o.selectedStoryObj.name}/${e.stripCsvSuffix(N)}`,class:"text item black-a",onClick:n[0]||(n[0]=Pe=>o.showModal=!1)},{default:s(()=>[l(d,{size:"18"},{default:s(()=>[l(u)]),_:1}),g($(e.stripCsvSuffix(N)),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024))),128))]),_:2},[e.showIcon?{name:"avatar",fn:s(()=>[l(i,{src:e.getIconSrc(o.selectedStoryObj.id),size:80},null,8,["src"])])}:void 0]),1024)]),_:1})]),_:1},8,["show"])}var V=v(ee,[["render",se],["__scopeId","data-v-7fdf9e76"]]);const re={props:["presentList","translatedDetails"],components:{ChapterListModal:V},name:"CardList",data(){return{selectedStoryObj:null,showModal:!1}},mounted(){},methods:{getIconSrc(t){return t?A(t):""},selectStory(t){this.selectedStoryObj=t,this.showModal=!0},coverSrc(t){return At(t)}},computed:{showModalIcon(){var t;return Boolean((t=this.selectedStoryObj)==null?void 0:t.id)}}},ae=["src"];function oe(t,n,o,h,r,e){const i=a("n-card"),u=a("n-avatar"),d=a("n-thing"),m=a("n-gi"),w=a("n-grid"),x=a("chapter-list-modal");return c(),y(b,null,[l(w,{"x-gap":"40","y-gap":"12",cols:"2 s:2 m:2 l:3 xl:4",responsive:"screen"},{default:s(()=>[(c(!0),y(b,null,k(o.presentList,(f,S)=>(c(),_(m,{key:S},{default:s(()=>[Boolean(f.cover)?(c(),_(i,{key:0,onClick:B=>e.selectStory(f),hoverable:""},{cover:s(()=>[p("img",{src:e.coverSrc(f.cover)},null,8,ae)]),header:s(()=>[p("div",null,$(f.name),1)]),_:2},1032,["onClick"])):(c(),_(d,{key:1,class:"card-style",onClick:B=>e.selectStory(f)},T({header:s(()=>[p("div",null,$(f.name),1)]),_:2},[Boolean(f.cover)?void 0:{name:"avatar",fn:s(()=>[l(u,{src:e.getIconSrc(f.id),size:80},null,8,["src"])])}]),1032,["onClick"]))]),_:2},1024))),128))]),_:1}),l(x,{showModal:r.showModal,"onUpdate:showModal":n[0]||(n[0]=f=>r.showModal=f),selectedStoryObj:r.selectedStoryObj,translatedDetails:o.translatedDetails},null,8,["showModal","selectedStoryObj","translatedDetails"])],64)}var W=v(re,[["render",oe],["__scopeId","data-v-456ea46a"]]);const le={components:{Profile:J,CardList:W},data(){return{idol:"",allDetails:null,translatedDetails:null}},computed:{cardList(){if(!this.translatedDetails||!this.allDetails)return[];let t=new Set,n=Object.keys(this.allDetails).map(o=>(t.add(this.allDetails[o].name),{id:o,name:this.allDetails[o].name}));return Object.keys(this.translatedDetails).map(o=>(!t.has(o)&&o[0]==="\u3010"&&(t.add(o),n.push({name:o})),null)),n},universalList(){return this.translatedDetails?Object.keys(this.translatedDetails).map(t=>t[0]==="\u3010"?null:{name:t}).filter(Boolean):[]}},mounted(){this.$nextTick(async function(){this.idol=this.$route.params.idol,this.allDetails=(await C(this.$store.getters.allCardsUrl(this.idol))).details,this.translatedDetails=(await C(this.$store.getters.translatedUrl(this.idol))).details})}};function ie(t,n,o,h,r,e){const i=a("card-list"),u=a("n-tab-pane"),d=a("n-tabs"),m=a("n-layout-content"),w=a("n-layout");return c(),_(w,null,{default:s(()=>[l(m,null,{default:s(()=>[l(d,{"default-value":"card","justify-content":"space-evenly",type:"line"},{default:s(()=>[l(u,{name:"card",tab:"\u5361\u7247\u5267\u60C5"},{default:s(()=>[l(i,{presentList:e.cardList,translatedDetails:r.translatedDetails},null,8,["presentList","translatedDetails"])]),_:1}),l(u,{name:"produce",tab:"\u5171\u901A\u5267\u60C5"},{default:s(()=>[l(i,{presentList:e.universalList,translatedDetails:r.translatedDetails},null,8,["presentList","translatedDetails"])]),_:1})]),_:1})]),_:1})]),_:1})}var ce=v(le,[["render",ie],["__scopeId","data-v-cda05c94"]]);const ue={components:{Profile:J,CardList:W},data(){return{idol:"",allDetails:null,translatedDetails:null}},computed:{universalList(){return this.translatedDetails?Object.keys(this.translatedDetails).map(t=>t[0]==="\u3010"?null:{name:t,cover:t}).filter(Boolean):[]}},mounted(){this.$nextTick(async function(){this.idol=this.$route.params.idol,this.translatedDetails=(await C(this.$store.getters.translatedUrl(this.idol))).details})}};function de(t,n,o,h,r,e){const i=a("card-list"),u=a("n-layout-content"),d=a("n-layout");return c(),_(d,null,{default:s(()=>[l(u,null,{default:s(()=>[l(i,{presentList:e.universalList,translatedDetails:r.translatedDetails},null,8,["presentList","translatedDetails"])]),_:1})]),_:1})}var _e=v(ue,[["render",de],["__scopeId","data-v-5399ffa2"]]);const pe={name:"StoryLine",props:["line","index","len"],methods:{isJsonLine(){return this.line[0]=="info"||this.index===this.len-3&&this.line[2]===""},isTranslatorLine(){return this.line[0]==="\u8BD1\u8005"||this.index===this.len-2&&this.line[2]===""}},computed:{speaker(){return this.isJsonLine()?"":this.isTranslatorLine()?"\u8BD1\u8005\uFF1A"+this.line[1]:this.line[1]?this.line[1]==="\u30D7\u30ED\u30C7\u30E5\u30FC\u30B5\u30FC"?"\u5236\u4F5C\u4EBA":this.line[1]:""},ja(){return this.isJsonLine()||this.isTranslatorLine()||!this.line[2]?"":this.line[2].replace("\\n","<br>")},cn(){return this.isJsonLine()||this.isTranslatorLine()||!this.line[3]?"":this.line[3].replace("\\n","<br>")},thumb(){return this.line[1]?I(this.line[1]):I("")}}},me={key:0,class:"dialogue"},he={class:"speaker_icon"},fe=["src"],ye={class:"speaker_name"},ve={class:"speak_content"},ge=["innerHTML"],$e=["innerHTML"];function be(t,n,o,h,r,e){return o.index!==0&&!e.isJsonLine()?(c(),y("div",me,[p("div",he,[p("img",{src:e.thumb},null,8,fe)]),p("div",ye,$(e.speaker),1),p("div",ve,[p("div",{innerHTML:e.ja},null,8,ge),p("div",{innerHTML:e.cn},null,8,$e)])])):D("",!0)}var we=v(pe,[["render",be],["__scopeId","data-v-0765da4d"]]);const ke={components:{StoryLine:we,ChapterListModal:V},name:"StoryPage",data(){return{csv:"",error:"",showModal:!1,translatedDetails:null}},watch:{path(){this.getCsv()},translatedUrl(){this.fetchDetails()}},computed:{prefix(){return this.$store.state.translationBase},idol(){return this.$route.params.idol},story(){return this.$route.params.story},chapter(){return this.$route.params.chapter},storyObj(){return{name:this.$route.params.story}},path(){let t;return this.$route.params.story==="\u5176\u4ED6\u5267\u60C5"?t=[this.prefix,this.$route.params.idol,this.$route.params.chapter].join("/")+".csv":this.$route.params.story&&(t=[this.prefix,M(this.$route.params.idol),this.$route.params.story,this.$route.params.chapter].join("/")+".csv"),t},translatedUrl(){return this.$store.getters.translatedUrl(this.$route.params.idol)}},methods:{refuseUpload({file:t}){return this.handleFile(t),!1},async handleFile(t){const n=await t.file.text();this.csv=P.parse(n).data},toTop(){window.scrollTo({top:0,left:0,behavior:"auto"})},async getCsv(){try{const t=await C(this.path);this.csv=P.parse(t).data}catch(t){this.error=t}},async fetchDetails(){try{this.translatedDetails=(await C(this.translatedUrl)).details}catch(t){this.error=t}}},mounted(){this.$nextTick(async function(){console.log(this.path),this.getCsv(),this.fetchDetails()})}},Le=g("\u56DE\u5230\u9876\u90E8"),Se=g("\u76EE\u5F55"),xe=g("\u4E0A\u4F20\u6587\u4EF6");function De(t,n,o,h,r,e){const i=a("n-tag"),u=a("story-line"),d=a("n-button"),m=a("n-upload"),w=a("n-space"),x=a("chapter-list-modal");return c(),y("div",null,[r.error!==""?(c(),_(i,{key:0,type:"danger"},{default:s(()=>[g($(this.error),1)]),_:1})):D("",!0),(c(!0),y(b,null,k(r.csv,(f,S)=>(c(),_(u,{key:S,line:f,index:S,len:r.csv.length},null,8,["line","index","len"]))),128)),l(w,{vertical:"",justify:"center",class:"fixed-button show-content"},{default:s(()=>[l(d,{onClick:e.toTop},{default:s(()=>[Le]),_:1},8,["onClick"]),l(d,{onClick:n[0]||(n[0]=f=>r.showModal=!0)},{default:s(()=>[Se]),_:1}),l(m,{onBeforeUpload:e.refuseUpload,action:"./hello"},{default:s(()=>[l(d,null,{default:s(()=>[xe]),_:1})]),_:1},8,["onBeforeUpload"])]),_:1}),l(x,{showModal:r.showModal,"onUpdate:showModal":n[1]||(n[1]=f=>r.showModal=f),selectedStoryObj:e.storyObj,translatedDetails:r.translatedDetails},null,8,["showModal","selectedStoryObj","translatedDetails"])])}var Ce=v(ke,[["render",De],["__scopeId","data-v-4b49fcf4"]]);const Ne={components:{Campaign:_e,Idol:ce},computed:{isIdolPage(){return this.$route.params.idol!=="283\u6D3B\u52A8\u5267\u60C5"&&this.$route.params.idol!=="\u4E3B\u9875\u5267\u60C5"}}};function Ie(t,n,o,h,r,e){const i=a("idol"),u=a("campaign");return e.isIdolPage?(c(),_(i,{key:0})):(c(),_(u,{key:1}))}var Me=v(Ne,[["render",Ie]]);const je=[{path:"/album",component:Xt},{path:"/album/:idol",component:Me},{path:"/album/:idol/:story/:chapter",component:Ce},{path:"/",redirect:"/album"},{path:"/hello",component:Pt}],Be=new X({history:Y(),routes:je}),Ue=R.units,Oe=Z({state(){return{count:0,units:Ue,others:R.others,configBase:F.configBase,translationBase:F.translationBase}},mutations:{increment(t){t.count++}},getters:{allCardsUrl:t=>n=>`${t.configBase}/idol/${M(n)}.json`,translatedUrl:t=>n=>`${t.configBase}/story/${M(n)}.json`}}),j=tt(jt),Te=et({components:[nt,st,rt,at,ot,lt,it,ct,ut,dt,_t,pt,mt,ht,ft,yt,vt,gt,$t,bt,wt,kt,Lt]});j.use(Be);j.use(Oe);j.use(Te);j.mount("#app");
